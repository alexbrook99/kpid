<!DOCTYPE html>
<html>
<head>
  <title></title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { overflow: hidden; background-color: #000; display: none; }
    #player-container { width: 100vw; height: 62vw; max-height: 100vh; z-index: 10; }
    #player-selector { position: absolute; right: 0px; }
    iframe { width: 100%; height: 100%; border: none; }
    select { display: block; margin: 10px; background-color: #222; color: #fff; padding: 4px 8px; border: none; }
    select option { background-color: #222; color: #fff; }
  </style>
</head>
<body>
  <select id="player-selector">
    <option value="finve">Плеер 1</option>
    <option value="namy">Плеер 2</option>
    <!-- <option value="flix">Плеер 3</option> -->
    <option value="turbo">Плеер 3</option>
    <option value="veoveo">Плеер 4</option>
    <option value="cdn">Плеер 5</option>
  </select>

  <div id="player-container">
    <video-player id="cdnvideohubvideoplayer" data-publisher-id="2058" is-show-banner="false" is-show-voice-only="false" data-aggregator="kp">
      <iframe id="player-iframe" src="" frameborder="0" allow="fullscreen; autoplay; screen-wake-lock; encrypted-media" allowfullscreen></iframe>
    </video-player>
  </div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const kpid = urlParams.get('id') || '';

    const playerSelector = document.getElementById('player-selector');
    const playerIframe = document.getElementById('player-iframe');
    const videoPlayer = document.getElementById('cdnvideohubvideoplayer');
    const body = document.body;

    if (kpid) {
      body.style.display = 'block';

      function loadPlayer() {
        const baseUrls = {
          finve: `https://finve-as.stloadi.live/?token=RrfLdf3C0Ib3wT8Fqvzi87tNuQaYbH&kp=${kpid}`,
          namy: `https://api.namy.ws/embed/kp/${kpid}`,
          // flix: `https://player0.flixcdn.space/show/kinopoisk/${kpid}`,
          turbo: `https://api.rstprgapipt.com/balancer-api/iframe?kp=${kpid}`,
          veoveo: `https://ladoni.pro/tvb/${kpid}`,
          cdn: `https://player.cdnvideohub.com/s2/v2.1.9/frame`
        };

        const url = baseUrls[playerSelector.value];
        playerIframe.src = url;

        if (playerSelector.value === 'cdn') {
          videoPlayer.setAttribute('data-title-id', kpid);

          setTimeout(() => {
            const script = document.createElement('script');
            script.src = "https://player.cdnvideohub.com/s2/stable/video-player.umd.js";

            body.appendChild(script);
          }, 100);
        } else {
          videoPlayer.removeAttribute('data-title-id');
          const existingScript = document.querySelector('script[src="https://player.cdnvideohub.com/s2/stable/video-player.umd.js"]');
          if (existingScript) {
            existingScript.remove();
          }
        }
      }

      playerSelector.addEventListener('change', loadPlayer);

      loadPlayer();
    }
  </script>
</body>
</html>
